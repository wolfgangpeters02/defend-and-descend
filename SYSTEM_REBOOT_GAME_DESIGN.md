# System: Reboot - Game Design Document

> **Version:** 2.1 (Design Principles Added)
> **Last Updated:** 2026-01-27
> **Platform:** Native iOS (Swift/SpriteKit)
> **Related:** [GAME_BALANCING_BLUEPRINT.md](./GAME_BALANCING_BLUEPRINT.md) for economy tables

---

## Table of Contents

1. [Game Identity](#1-game-identity)
2. [Visual Identity](#2-visual-identity)
3. [The Three Currencies](#3-the-three-currencies)
4. [Game Modes](#4-game-modes)
5. [The Protocol System](#5-the-protocol-system)
6. [The Mega-Board](#6-the-mega-board)
7. [Component Upgrades](#7-component-upgrades)
8. [Core Mechanics](#8-core-mechanics)
9. [Progression Flow](#9-progression-flow)
10. [UI Structure](#10-ui-structure)
11. [Technical Architecture](#11-technical-architecture)
12. [Design Principles & Safeguards](#12-design-principles--safeguards)

---

## 1. Game Identity

### One-Line Pitch

> "SimCity meets Tower Defense on a motherboard - build your PC empire, defend it from viruses."

### Core Fantasy

You are the **Kernel** - the master system administrator. You build the hardware (Motherboard), install the software (Protocols), and manually debug corrupted sectors when the automated defenses fail.

### The Hook

You cannot just buy upgrades with money. You must:
- **Build the hardware** to run them (PSU capacity)
- **Compile the software** to use them (Protocols with Data)
- **Defend the system** to earn resources (Hash from CPU)

### Two Modes, One Goal

| Mode | Genre | Purpose | Primary Currency |
|------|-------|---------|------------------|
| **Idle Mode** (Motherboard) | Tower Defense / City Builder | Build, expand, earn passive income | Hash |
| **Active Mode** (Debugger) | Twin-Stick Survivor | Hunt Data, test Protocols | Data |

---

## 2. Visual Identity

### Aesthetic: "Dark Mode Terminal"

The game takes place entirely inside a computer system.

| Element | Style |
|---------|-------|
| **Background** | Deep blacks (#0a0a0f), subtle circuit grid |
| **Traces** | Glowing copper/cyan circuit paths |
| **UI** | Monospace fonts, terminal styling |
| **Effects** | Scan lines, glitch effects, additive glow |

### Color Palette

```
BACKGROUNDS
-----------
Background:     #0a0a0f  (Almost black)
Surface:        #1a1a24  (Cards, panels)
Dark Surface:   #0d1117  (Darker panels)

BRAND COLORS
------------
Primary:        #00d4ff  (Cyan - circuits, Power)
Secondary:      #8b5cf6  (Purple - special)
Success:        #22c55e  (Green - health, Data)
Warning:        #f59e0b  (Amber - legendary)
Danger:         #ef4444  (Red - enemies)
Muted:          #4a4a5a  (Disabled)

PCB ELEMENTS
------------
Copper Trace:   #b87333  (Path traces)
Active Glow:    #00ff88  (Active components)
Ghost Mode:     #333344  (Locked sectors)
```

### Typography

All text uses monospace fonts for terminal authenticity:

| Usage | Font |
|-------|------|
| Display | System Monospaced Bold 32-48pt |
| Headline | System Monospaced Bold 18-24pt |
| Body | System Monospaced 14-16pt |
| Caption | System Monospaced 10-12pt |

---

## 3. The Three Currencies

The economy uses three distinct currencies that create meaningful constraints:

| Icon | Name | Role | Source | Cap |
|------|------|------|--------|-----|
| âš¡ | **Power (Watts)** | The Ceiling | PSU | Static capacity |
| Ä¦ | **Hash** | The Cash | CPU (passive) | HDD storage limit |
| â—ˆ | **Data** | The Science | Active Mode kills | Uncapped |

### Power (Watts) âš¡

**Role:** BUILD LIMIT - determines how much you can have running.

- Power is a **capacity**, not consumed
- Towers and components allocate Power while active
- PSU upgrades increase the ceiling
- Running at max Power is fine (no penalty)

```
Example:
PSU: 450W Capacity
Currently Used: 380W
Available: 70W

Tower costs 50W â†’ CAN BUILD
Tower costs 100W â†’ CANNOT BUILD (need PSU upgrade)
```

### Hash (Ä¦)

**Role:** MONEY - earned passively, spent on purchases.

- Generated by CPU based on Efficiency
- Income = Base Rate Ã— Efficiency% Ã— RAM Multiplier
- Capped by HDD storage capacity
- Used for: Towers, Upgrades, Sector unlocks

```
Example:
HDD Capacity: 50,000 Ä¦
Current Hash: 48,000 Ä¦
Income: 100 Ä¦/sec (at 100% Efficiency)
```

### Data (â—ˆ)

**Role:** RESEARCH - unlocks new technology.

- Only earned through Active Mode (skill-based)
- Used to compile Protocols
- No storage cap (hoardable)
- Creates motivation to play Active Mode

---

## 4. Game Modes

### 4.1 Idle Mode: The Motherboard

**Genre:** Tower Defense + City Builder

**What You Do:**
- Place Firewalls (towers converted from Protocols)
- Expand to new sectors
- Manage Power budget
- Watch Hash accumulate
- Defend against virus waves

**Key Features:**
- Pan/zoom across the Mega-Board
- Drag-to-place tower system
- Efficiency-based income
- Sector unlock progression

**When to Play:**
- Accumulating Hash
- Relaxed progression
- Testing tower layouts

### 4.2 Active Mode: The Debugger

**Genre:** Twin-Stick Survivor (Vampire Survivors style)

**What You Do:**
- Select a Sector to debug
- Control the Cursor (player avatar)
- Fight virus swarms
- Collect Data drops

**Key Features:**
- Virtual joystick movement
- Auto-targeting/auto-fire (equipped Protocol â†’ Weapon)
- Time-based survival
- Extraction decision (risk/reward)

**When to Play:**
- Need Data for Protocol compilation
- Want action gameplay
- Testing Protocol weapons

### Mode Switching Motivation

| Situation | Problem | Solution |
|-----------|---------|----------|
| "Can't build more towers" | Power limit | Upgrade PSU (costs Hash) |
| "Can't afford PSU" | Not enough Hash | Wait for income OR upgrade HDD |
| "Protocol not compiled" | Need Data | Play Active Mode |

---

## 5. The Protocol System

Protocols are **dual-purpose software** that function differently in each mode.

### Protocol Structure

```swift
Protocol {
    id: String
    name: String
    rarity: Rarity          // Common â†’ Legendary
    level: Int              // 1-10 (upgradeable)
    isCompiled: Bool        // Requires Data to compile

    firewallStats: {        // TD Mode stats
        damage, range, attackSpeed, splash, slow, chain
    }

    weaponStats: {          // Active Mode stats
        damage, attackSpeed, projectileCount, pierce
    }
}
```

### The 8 Core Protocols

| Protocol | Rarity | Firewall Style | Weapon Style |
|----------|--------|----------------|--------------|
| Kernel Pulse | Common | Single-target | Pistol |
| Burst Shot | Common | Multi-shot | Shotgun |
| Ice Shard | Rare | Slow effect | Frost beam |
| Chain Lightning | Rare | Chain attack | Arc weapon |
| Flame Thrower | Epic | AoE burn | Flamethrower |
| Sniper Protocol | Epic | Long range | Railgun |
| Quantum Tunneler | Legendary | Teleport hit | Phase shots |
| Null Pointer | Legendary | Instant kill | Delete beam |

### Protocol Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LOCKED    â”‚â”€â”€â”€â–¶â”‚  COMPILED   â”‚â”€â”€â”€â–¶â”‚  EQUIPPED   â”‚
â”‚ (Need Data) â”‚    â”‚ (Available) â”‚    â”‚ (In Deck)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                  â”‚
        â–¼                 â–¼                  â–¼
   Costs Data      Can place as       Used as weapon
   to compile      Firewall (TD)      in Active Mode
```

---

## 6. The Mega-Board

The Motherboard is a **3x3 grid of sectors** that players unlock over time.

### Sector Grid Layout

```
        [I/O]       [CACHE]     [NETWORK]    (Row 2 - Top)

        [GPU]       [RAM]       [STORAGE]    (Row 1 - Middle)
                   (Start)

        [POWER]     [CPU]       [EXPANSION]  (Row 0 - Bottom)
```

### Sector Details

| Sector | Grid | Theme | Unlock Cost | Prerequisites |
|--------|------|-------|-------------|---------------|
| RAM | (1,1) | Memory | FREE | Starter |
| CPU | (1,0) | Processing | 5,000 Ä¦ | RAM |
| GPU | (0,1) | Graphics | 15,000 Ä¦ | RAM |
| Storage | (2,1) | Storage | 10,000 Ä¦ | RAM |
| Cache | (1,2) | Memory | 8,000 Ä¦ | RAM |
| Power | (0,0) | Power | 25,000 Ä¦ | GPU |
| I/O | (0,2) | I/O | 20,000 Ä¦ | GPU |
| Network | (2,2) | Network | 25,000 Ä¦ | Storage + Cache |
| Expansion | (2,0) | I/O | 30,000 Ä¦ | Storage |

### Encryption Gates

Locked sectors display:
- Ghost/dimmed appearance
- Encryption gate at boundary
- Cost to unlock
- Prerequisites required

When unlocked:
- Power surge animation along data bus
- Sector lights up
- New tower slots available
- New enemy paths may activate

---

## 7. Component Upgrades

Global upgrades enhance the entire system.

### PSU (Power Capacity)

| Tier | Name | Capacity | Hash Cost |
|------|------|----------|-----------|
| 1 | Basic PSU | 450W | Starting |
| 2 | Bronze PSU | 650W | 25,000 Ä¦ |
| 3 | Silver PSU | 850W | 75,000 Ä¦ |
| 4 | Gold PSU | 1,200W | 200,000 Ä¦ |
| 5 | Platinum PSU | 1,600W | 500,000 Ä¦ |

### CPU (Hash Generation)

| Tier | Name | Hash/sec | Fire Rate Bonus |
|------|------|----------|-----------------|
| 1 | i3 | 10 Ä¦/s | +0% |
| 2 | i5 | 25 Ä¦/s | +5% |
| 3 | i7 | 50 Ä¦/s | +10% |
| 4 | i9 | 100 Ä¦/s | +15% |
| 5 | Xeon | 200 Ä¦/s | +25% |

### RAM (Efficiency & Health)

| Tier | Effect |
|------|--------|
| 1 | +10% efficiency regen, 100 health |
| 2 | +15% efficiency regen, 120 health |
| 3 | +20% efficiency regen, 150 health |
| 4 | +30% efficiency regen, 200 health |

### Cooling (Fire Rate)

| Tier | Fire Rate Multiplier |
|------|---------------------|
| 1 | 1.0x |
| 2 | 1.15x |
| 3 | 1.30x |
| 4 | 1.50x |

### HDD (Hash Storage)

| Tier | Max Storage |
|------|-------------|
| 1 | 25,000 Ä¦ |
| 2 | 75,000 Ä¦ |
| 3 | 200,000 Ä¦ |
| 4 | 500,000 Ä¦ |
| 5 | 2,000,000 Ä¦ |

---

## 8. Core Mechanics

### 8.1 Efficiency System

Efficiency determines Hash income rate.

```
Hash Income = Base Rate Ã— Efficiency% Ã— RAM Multiplier
```

**How Efficiency Works:**
- Starts at 100%
- Each virus reaching CPU: -5%
- Regenerates over time (+1% per interval)
- RAM upgrades speed up regeneration

**At 0% Efficiency:**
- System Freeze state triggers
- All gameplay paused
- Player must recover

### 8.2 System Freeze & Recovery

When efficiency hits 0%:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SYSTEM FREEZE               â”‚
â”‚                                     â”‚
â”‚   [Flush Memory] - Pay 10% Hash     â”‚
â”‚   [Manual Override] - Free (game)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Recovery Options:**

1. **Flush Memory**
   - Costs 10% of current Hash
   - Instantly restores 50% efficiency
   - Quick but expensive

2. **Manual Override**
   - Free (no Hash cost)
   - 30-second survival mini-game
   - Dodge hazards to restore system
   - Success: 50% efficiency restored
   - Failure: Return to freeze screen

### 8.3 Tower Placement

**Drag-to-Place System:**
1. Drag Protocol card from bottom deck
2. Valid slots highlight on map
3. Drop on slot to place
4. Tower costs Hash + allocates Power

**Power Budget:**
- Each tower has Power draw
- Cannot exceed PSU capacity
- Selling tower frees Power

### 8.4 Wave System

Viruses spawn in waves from I/O ports.

**Wave Progression:**
- Waves increase in difficulty
- More enemy types over time
- Boss waves at intervals
- Victory after final wave

---

## 9. Progression Flow

### Early Game (Waves 1-20)

1. Start with RAM sector only
2. Place basic Firewalls
3. Earn Hash passively
4. Upgrade CPU for more income
5. Compile first Protocols

### Mid Game (Waves 21-50)

1. Unlock adjacent sectors (CPU, GPU, Storage)
2. Multiple spawn points active
3. Upgrade PSU for more towers
4. Build specialized defenses
5. Farm Data in Active Mode

### Late Game (Waves 51+)

1. Unlock outer sectors
2. Complex path management
3. High-tier Protocols required
4. Zero-Day events (planned)
5. Full board utilization

### The Core Loop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 IDLE MODE                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  BUILD   â”‚â”€â”€â–¶â”‚  DEFEND  â”‚â”€â”€â–¶â”‚   EARN   â”‚    â”‚
â”‚  â”‚ (Spend)  â”‚   â”‚  (Play)  â”‚   â”‚  (Hash)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â–²                              â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Need Data?
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ACTIVE MODE                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ENTER   â”‚â”€â”€â–¶â”‚  FIGHT   â”‚â”€â”€â–¶â”‚   LOOT   â”‚    â”‚
â”‚  â”‚ (Sector) â”‚   â”‚ (Skill)  â”‚   â”‚  (Data)  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. UI Structure

### Tab Navigation

| Tab | View | Purpose |
|-----|------|---------|
| **BOARD** | MotherboardView | Main TD gameplay |
| **ARSENAL** | ArsenalView | Protocol collection |
| **UPGRADES** | UpgradesView | Component upgrades |
| **DEBUG** | DebugView | Active mode selector |

### Motherboard HUD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ 380/450W    Ä¦ 12,450    Efficiency: 95%      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚            [GAME AREA]                          â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Protocol Deck (drag to place)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ğŸ›¡ï¸ â”‚ â”‚ â„ï¸ â”‚ â”‚ âš¡ â”‚ â”‚ ğŸ”¥ â”‚                   â”‚
â”‚  â”‚50W â”‚ â”‚75W â”‚ â”‚100Wâ”‚ â”‚150Wâ”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Active Mode HUD

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¤ï¸â¤ï¸â¤ï¸    SECTOR: RAM    â—ˆ 147    â± 2:34      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚            [GAME AREA]                          â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚              [JOYSTICK]                         â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Technical Architecture

### Core Technologies

| Component | Technology |
|-----------|------------|
| Engine | SpriteKit (2D) |
| UI | SwiftUI |
| State | ObservableObject pattern |
| Storage | UserDefaults + Codable |
| Haptics | UIImpactFeedbackGenerator |

### Performance Targets

- 60fps gameplay
- Sector culling for large board
- Efficient particle systems
- Smooth camera with inertia

### Key Systems

| System | File | Purpose |
|--------|------|---------|
| Game State | TDTypes.swift | TD game state model |
| Protocols | Protocol.swift | Dual-purpose cards |
| Mega-Board | MegaBoardTypes.swift | Sector grid system |
| Upgrades | GlobalUpgrades.swift | Component tiers |
| Path System | PathSystem.swift | Enemy movement |
| Tower System | TowerSystem.swift | Targeting & attacks |
| Storage | StorageService.swift | Persistence |

### File Structure

```
LegendarySurvivors/
â”œâ”€â”€ Core/
â”‚   â”œâ”€â”€ Types/           # Data models
â”‚   â””â”€â”€ Systems/         # Game systems
â”œâ”€â”€ GameEngine/
â”‚   â””â”€â”€ Systems/         # ECS-style systems
â”œâ”€â”€ Rendering/
â”‚   â””â”€â”€ TDGameScene.swift
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ StorageService.swift
â”‚   â””â”€â”€ HapticsService.swift
â””â”€â”€ UI/
    â”œâ”€â”€ Game/            # Game views
    â””â”€â”€ Tabs/            # Tab views
```

---

## 12. Design Principles & Safeguards

These principles prevent common design traps and ensure a fun, fair experience.

### ğŸ”´ DO NOT: Economy Buildings Competing for Tower Slots

**The Trap:** If players must choose between placing a Hard Drive (income) or a Firewall (defense) on the same tile, they will always choose defense. This makes the "city-building" aspect feel like a punishment.

**Our Solution: Global Upgrades**

Economy buildings (PSU, CPU, RAM, HDD, Cooling) are **global upgrades purchased through the UI**, not placeable items. Tower slots are used **exclusively** for Firewalls (Protocol towers).

```
Tower Slots â†’ Defense only (Firewalls/Protocols)
Global Upgrades â†’ Economy (PSU, CPU, RAM, HDD, Cooling)
```

This means players never sacrifice defense capability for economy. They build their hardware through the Upgrades tab, then deploy software (Protocols) as Firewalls on the board.

---

### ğŸ”´ DO NOT: Simulate Death Offline

**The Trap:** If a player leaves at 100% efficiency and the game simulates waves while they're gone, they might return to find 0 Hash earned because "Wave 50 would have killed them." This leads to uninstalls.

**Our Solution: Snapshot Logic**

The offline system uses a **frozen snapshot** of the player's state:

```swift
// How offline earnings work:
let efficiency = profile.tdStats.averageEfficiency  // SNAPSHOT - not simulated
let hashEarned = timeAway * baseRate * cpuMultiplier * efficiency * 0.5
```

**Rules:**
- Efficiency is frozen at the average from last session
- No wave simulation occurs offline
- Time is capped at 8 hours
- 50% income penalty (offline multiplier)
- **You cannot die while not playing**

---

### ğŸ”´ DO NOT: Dynamic Pathfinding (Maze Building)

**The Trap:** If placing a tower blocks enemy paths, you need complex A* pathfinding that eats CPU and causes bugs (e.g., players completely walling off the CPU).

**Our Solution: Fixed Paths (The Data Bus)**

The copper traces are **permanent roads**. Towers are placed in slots **adjacent** to paths, never on them.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Slot]      PATH      [Slot]           â”‚
â”‚    â†“          â†“          â†“              â”‚
â”‚   Tower â†â†’ Enemies â†â†’ Tower             â”‚
â”‚             (Fixed)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
```swift
let pathOffset: CGFloat = 100  // Slots are 100pts away from path center
```

**Benefits:**
- Guaranteed 60fps performance
- No "invalid maze" edge cases
- Predictable gameplay
- Clear visual language (traces = enemy roads)

---

### ğŸŸ¢ MUST DO: Protocol Synergy (The Secret Sauce)

**The Opportunity:** When upgrading a Protocol, it should enhance **both** the Tower (Idle) and Weapon (Active) simultaneously.

**Our Implementation:**

```swift
struct Protocol {
    var level: Int  // Single level affects both modes

    var firewallStats: FirewallStats {
        let multiplier = Self.levelMultiplier(level: level)
        return FirewallStats(damage: firewallBaseStats.damage * multiplier, ...)
    }

    var weaponStats: WeaponStats {
        let multiplier = Self.levelMultiplier(level: level)  // SAME multiplier
        return WeaponStats(damage: weaponBaseStats.damage * multiplier, ...)
    }
}
```

**Why This Matters:**
- Every upgrade feels doubly rewarding
- Players are motivated to test upgrades in both modes
- Solves the "disconnected game modes" problem
- Creates excitement: "Let me see how strong my Firewall is now!"

---

### ğŸŸ¢ MUST DO: System Freeze as Gameplay (Not Just Penalty)

**The Opportunity:** Instead of a simple "Pay to Restore" button, the 0% efficiency state becomes a fun mini-game.

**Our Implementation: Manual Override**

```
Efficiency hits 0%
    â†’ System Freezes (all gameplay paused)
    â†’ "EMERGENCY OVERRIDE" button pulses
    â†’ Player clicks it
    â†’ 30-second survival mini-game launches
    â†’ Win: System reboots to 50% efficiency
    â†’ Lose: Return to freeze screen, try again
```

**Manual Override Mini-Game:**
- Dodge hazards (projectiles, expanding zones, sweep lasers)
- Survive 30 seconds
- 3-hit health system
- Difficulty scales over time
- Free (no Hash cost)

**Why This Matters:**
- Turns failure into fun gameplay
- Gives skill-based recovery option
- Creates memorable moments
- Players don't feel punished for struggling

---

### ğŸ› ï¸ Technical: Sector-Based Rendering

**The Trap:** A single 4000x4000 texture will choke SpriteKit.

**Our Solution: Sector Chunks**

```swift
// Each sector is a separate SKNode (~1400x1400)
func renderGhostSector(_ sector: MegaBoardSector, in parentNode: SKNode) {
    let ghostNode = SKNode()
    ghostNode.name = "ghost_\(sector.id)"
    // Only added when visible/adjacent
    parentNode.addChild(ghostNode)
}
```

**Rules:**
- Each sector is its own SKNode
- Only render visible + adjacent sectors
- Ghost sectors (locked) are lightweight
- Decrypt animation transitions between states

---

## Summary

**System: Reboot** combines idle city-building with active twin-stick combat through:

1. **Three Currencies** - Power limits builds, Hash buys items, Data unlocks tech
2. **Two Modes** - Idle (TD) for income, Active (Survivor) for Data
3. **Protocol System** - Cards work as Firewalls (TD) AND Weapons (Active) with unified upgrades
4. **Mega-Board** - 3x3 sector grid with progressive unlocks
5. **Efficiency** - Income tied to defense performance
6. **System Freeze** - Recovery mechanic with skill-based mini-game option

### Design Safeguards

| Trap | Solution |
|------|----------|
| Economy vs Defense slots | Global upgrades (no competition) |
| Offline death simulation | Snapshot logic (can't die offline) |
| Dynamic maze pathfinding | Fixed paths (towers adjacent to traces) |
| Disconnected game modes | Protocol synergy (one upgrade, both modes) |
| Punishing failure states | Manual Override mini-game (fun recovery) |

The game creates meaningful choices at every stage, requiring players to balance building, defending, and hunting for resourcesâ€”without falling into common design traps that frustrate players.

---

*See [GAME_BALANCING_BLUEPRINT.md](./GAME_BALANCING_BLUEPRINT.md) for detailed economy tables and balancing numbers.*
